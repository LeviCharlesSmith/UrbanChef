<%= render '/shared/navbar' %>


<!-- <p><div id="rateYo_average"></div></p> -->

  <h4>Average star rating: </h4>
  <% if @chef.ratings.any? %>
    <%= @average_rating %>
  <% else %>
    <p>No ratings yet</p>
  <% end %>

<!-- Mobile SHiz -->
<div class="jumbotron">

</div>
<!-- End Mobile Shiz -->

<h1 class="chef_show_h1"><%= @chef.name %></h1>
<p class="chef_experience"><%= "Experience: #{@chef.experience}" %></p>
<p class="chef_speciality"><%= "Specialty: #{@chef.specialty}" %></p>

<p><%= image_tag @chef.chef_avatar.url(:medium), class: "chef_avatar" if @chef.chef_avatar %></p>


<br>
<br>



<% if current_client %>

  <h3><%= @chef.name %> offers these dish's:</h3>

  <%= form_for [@client, @chef, @order] do |f| %>

    <% @chef.products.each do |product| %>

      <div class="field field_desktop field_mobile">
        <p><%= image_tag product.product_picture.url(:small), class: "product_picture_desktop" if product.product_picture %></p>
        <p><strong><%= product.name %></strong></p>
        <p><%= product.description %></p>
        <p><%= "$#{product.price}" %></p>

        <%= f.fields_for :line_items, @order.line_items.new do |line_item_form| %>

        <p><%= line_item_form.label :product_id, "Select Dish" %></p>
        <p><%= line_item_form.check_box :product_id, {}, product.id, nil %></p>
        <% end %>

      </div>

    <% end %>
    <br>
    <div class="action action_desktop">
      <%= f.submit 'Subscribe to this Chef' %>
    </div>

  <% end %>
<% else %>
  <!-- <p>Please log in to select and view dish's!</p> -->
<% end %>




<!-- When current chef logged in: -->
<% if current_chef %>
  <% @chef.products.each do |product| %>

    <div class="field">
      <p><%= image_tag product.product_picture.url(:small) if product.product_picture %></p>
      <p><strong><%= product.name %></strong></p>
      <p><%= product.description %></p>
      <p><%= "$#{product.price}" %></p>
  <% end %>
<% end %>



    <% if current_client %>
  <h4>Rate your chef</h4>

  <%= form_for([@chef, @rating], remote: true) do |f| %>

  <div id="rateYo"></div>

    <div class="field" style="display:none;">
      <%= f.label :rating %>
      <%= f.number_field :rating %>
    </div>

    <div class="field">
      <%= f.label :review %><br />
      <%= f.text_area :review %>
    </div>

    <div class="actions">
      <%= f.submit %>
    </div>
    <% end %>
  <% end %>



  <h3>Reviews for <%= @chef.name %></h3>

  <% if @chef.ratings.any? %>
  <ul class="ratings-list">
    <%= render @chef.ratings %>
  </ul>
  <% else %>
    <p>No reviews yet.</p>
  <% end %>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.0.1/jquery.rateyo.min.js"></script>
